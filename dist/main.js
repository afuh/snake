"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function setup(){createCanvas(canSize,canSize).parent("game"),stroke(255),noFill(),snake=new Snake,food=new Food}function draw(){state.run()}function keyPressed(){keyCode===UP_ARROW?move=[0,-1]:keyCode===RIGHT_ARROW?move=[1,0]:keyCode===DOWN_ARROW?move=[0,1]:keyCode===LEFT_ARROW?move=[-1,0]:32===keyCode&&state.pause()}var _createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),snake=void 0,move=[1,0],food=void 0,canSize=600,canvasColor=51,square=Math.floor(canSize/30),fps=8,Snake=function(){function e(){_classCallCheck(this,e),this.pos=createVector(canSize/2,canSize/2),this.speed=createVector(1,0),this.score=0,this.tail=[]}return _createClass(e,[{key:"direction",value:function(e){e[0]*this.speed.x<0||e[1]*this.speed.y<0||(this.speed.x=e[0],this.speed.y=e[1])}},{key:"eat",value:function(e){return 0===int(dist(this.coords()[0],this.coords()[1],e[0],e[1]))&&(this.score++,fps++,!0)}},{key:"coords",value:function(){return[this.pos.x/square,this.pos.y/square]}},{key:"death",value:function(){(this.pos.x<0||this.pos.y<0||this.pos.x>=canSize||this.pos.y>=canSize)&&state.death();for(var e=0;e<this.tail.length;e++)this.tail[e].x==this.pos.x&&this.tail[e].y==this.pos.y&&state.death()}},{key:"update",value:function(){snake.direction(move);for(var e=0;e<this.tail.length-1;e++)this.tail[e]=this.tail[e+1];this.score>=1&&(this.tail[this.score-1]=createVector(this.pos.x,this.pos.y)),this.pos.x+=this.speed.x*square,this.pos.y+=this.speed.y*square,snake.death()}},{key:"render",value:function(){var e=color(255,204,0);fill(e),noStroke();for(var t=0;t<this.tail.length;t++)rect(this.tail[t].x,this.tail[t].y,square,square);rect(this.pos.x,this.pos.y,square,square)}}]),e}(),Food=function(){function e(){_classCallCheck(this,e),this.x=Math.floor(random(canSize/square))*square,this.y=Math.floor(random(canSize/square))*square}return _createClass(e,[{key:"coords",value:function(){return[this.x/square,this.y/square]}},{key:"render",value:function(){fill(255),rect(this.x,this.y,square,square),this.coords()}}]),e}(),state={game:!0,run:function(){state.game=!0,frameRate(fps),background(canvasColor),snake.render(),snake.update(),food.render(),message.score(),snake.eat(food.coords())&&(food=new Food)},death:function(){noLoop(),state.game=!1,message.death(),fps=6,snake=new Snake},pause:function(){state.game||(loop(),state.game=!0)}},message={death:function(){textSize(32);var e="press spacebar to play again",t=(textWidth("game over"),textWidth(e));fill(255),text("game over",canSize/2-t/2,canSize/2),textSize(30),text(e,canSize/2-t/2,canSize/2+square)},score:function(){textSize(22),fill(255);var e="score "+100*snake.score;textWidth(e);text(e,2,canSize)}};